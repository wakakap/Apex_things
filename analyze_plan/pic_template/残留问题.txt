本来应该是3，在实践中如果环境光很高，则会识别成0

这是我的项目的目前的代码，现在我想把武器从bow扩充到其他武器，我在根目录下的pic_template文件夹里加入了template_bow，template_3030, template_charge，template_eva,template_kraber，template_longbow，template_mastiff,template_PK_red，template_sentinel，template_wingman这些武器的二值图片，它们都是按照现有代码的坐标剪的，所以坐标保持不变。数字的位置坐标也保持不变。需要改动的可能是find_shooting_moments中对于每种武器都要单独用一套变量来记录上一个数字等，每种武器都参考bow的算法单独统计，互不干扰，is_bow_active同理也分成很多种武器是否在使用的检测，由于每种武器的使用是互斥事件，使用score = compare_score_iou的方式用score最高的来确定某时刻是哪种武器在使用。你可以适当优化代码结构，看看怎么设计更合理，但是不要改变我原有的一些关键逻辑和中文注释。唯一特殊的是，只有template_bow在使用时需要检测infinite，其他武器在使用时则不需要检测infinite。触发精确扫描的原因也增加到每种武器为不同的原因，触发精确扫描后只需要检测对应的武器即可。要其他武器都不需要考虑，只考虑数字变化即可。最后我想要用户在界面里可勾选要检测的武器，然后运行part2时，就会在扫描中记录对应的武器的发射时刻。在保存时间点时，对于勾选的武器，每种武器都单独保存在一个txt文件中，然后再用一个all_weapon.txt保存所有勾选武器的时间点（按时间先后顺序排列），对应的part3用户可以选择想要剪辑的武器，传入对应的路径，然后把这些勾选的武器的时间按顺序排列后剪辑，命名规则上改为{video_name_no_ext}_{safe_time_str_for_filename}_clip_{i+1}{input_video_extension}_{weaponname}. 请给我修改后的完整代码，并且用中文注释，保留我原本没有使用到的函数和备注。